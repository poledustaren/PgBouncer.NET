<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PgBouncer.NET Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(233, 69, 96, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            color: #fff;
            font-size: 1.8em;
            font-weight: 600;
        }

        .logo span {
            color: #e94560;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 50px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff88;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                box-shadow: 0 0 10px #00ff88;
            }

            50% {
                opacity: 0.5;
                box-shadow: 0 0 20px #00ff88;
            }
        }

        /* –°–µ–∫—Ü–∏—è —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º */
        .info-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(233, 69, 96, 0.1);
        }

        .info-section h2 {
            color: #e94560;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .info-section p {
            color: #b0b0b0;
            line-height: 1.7;
            margin-bottom: 10px;
        }

        .info-section strong {
            color: #00ff88;
        }

        .info-section code {
            background: rgba(233, 69, 96, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            color: #e94560;
            font-family: monospace;
        }

        /* –°–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(233, 69, 96, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(233, 69, 96, 0.5);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #e94560 0%, #ff6b8a 100%);
        }

        .stat-card.green::before {
            background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
        }

        .stat-card.blue::before {
            background: linear-gradient(135deg, #4ecdc4 0%, #45b7aa 100%);
        }

        .stat-card.orange::before {
            background: linear-gradient(135deg, #ffa502 0%, #ff7f50 100%);
        }

        .stat-label {
            color: #888;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .stat-value {
            color: #fff;
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-description {
            color: #666;
            font-size: 0.8em;
            line-height: 1.5;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-unit {
            color: #e94560;
            font-size: 0.5em;
            margin-left: 5px;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress-container {
            margin-top: 15px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #e94560);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.75em;
            color: #666;
        }

        /* –¢–∞–±–ª–∏—Ü–∞ —Å–µ—Å—Å–∏–π */
        .sessions-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(233, 69, 96, 0.1);
        }

        .sessions-section h2 {
            color: #fff;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sessions-section h2 span {
            font-size: 0.6em;
            background: rgba(233, 69, 96, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            color: #e94560;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        th {
            color: #888;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.8em;
            letter-spacing: 1px;
        }

        td {
            color: #e0e0e0;
        }

        .state-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .state-active {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .state-waiting {
            background: rgba(255, 165, 2, 0.2);
            color: #ffa502;
        }

        .state-connecting {
            background: rgba(78, 205, 196, 0.2);
            color: #4ecdc4;
        }

        .state-error {
            background: rgba(233, 69, 96, 0.2);
            color: #e94560;
        }

        /* –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ */
        .glossary {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(233, 69, 96, 0.1);
        }

        .glossary h2 {
            color: #e94560;
            margin-bottom: 20px;
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .glossary-item {
            background: rgba(255, 255, 255, 0.02);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid #e94560;
        }

        .glossary-item h4 {
            color: #fff;
            margin-bottom: 8px;
        }

        .glossary-item p {
            color: #888;
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: #444;
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">
                <h1>üêò PgBouncer<span>.NET</span></h1>
            </div>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span style="color: #00ff88">–†–∞–±–æ—Ç–∞–µ—Ç</span>
            </div>
        </header>

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã -->
        <div class="info-section">
            <h2>üìñ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?</h2>
            <p>
                <strong>PgBouncer.NET</strong> ‚Äî —ç—Ç–æ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è PostgreSQL, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É
                <strong>"—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π"</strong>. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫–∞–∂–¥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é
                –ø–æ–¥–∫–ª—é—á–∞–ª–æ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ PgBouncer.
            </p>
            <p>
                <strong>–¢–∏–ø –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏:</strong> <code>Session Pooling —Å –ª–∏–º–∏—Ç–æ–º</code> ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å FIFO
                (First In, First Out). –ï—Å–ª–∏ –≤—Å–µ —Å–ª–æ—Ç—ã –∑–∞–Ω—è—Ç—ã, –Ω–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∂–¥—É—Ç –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å–ª–æ—Ç–∞.
            </p>
            <p>
                <strong>–ü—Ä–∏–º–µ—Ä:</strong> –£ –≤–∞—Å 10 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –∫–∞–∂–¥—ã–π —Ö–æ—á–µ—Ç 200 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π = 2000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫
                PostgreSQL.
                –ù–æ PostgreSQL –æ–±—ã—á–Ω–æ –¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 100-500. PgBouncer –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –≤—Å–µ 2000 –∫–ª–∏–µ–Ω—Ç–æ–≤,
                –Ω–æ –∫ –±–∞–∑–µ –∏–¥—ë—Ç –º–∞–∫—Å–∏–º—É–º <code id="maxBackendInfo">100</code> —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
            </p>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card green">
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö Backend –°–æ–µ–¥–∏–Ω–µ–Ω–∏–π</div>
                <div class="stat-value"><span id="activeBackend">0</span><span class="stat-unit">/ <span
                            id="maxBackend">100</span></span></div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="backendProgress" style="width: 0%"></div>
                    </div>
                    <div class="progress-labels">
                        <span>0</span>
                        <span id="maxBackendLabel">100</span>
                    </div>
                </div>
                <div class="stat-description">
                    –°–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å–µ–π—á–∞—Å –æ—Ç–∫—Ä—ã—Ç–æ –∫ PostgreSQL. –≠—Ç–æ –≥–ª–∞–≤–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î.
                </div>
            </div>

            <div class="stat-card orange">
                <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤ –≤ –û—á–µ—Ä–µ–¥–∏</div>
                <div class="stat-value" id="waitingClients">0</div>
                <div class="stat-description">
                    –ö–ª–∏–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∂–¥—É—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å–ª–æ—Ç–∞. –ï—Å–ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ —Ä–∞—Å—Ç—ë—Ç ‚Äî –±–∞–∑–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞ –∏–ª–∏ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å
                    MaxSize.
                </div>
            </div>

            <div class="stat-card blue">
                <div class="stat-label">–í—Å–µ–≥–æ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –°–µ—Å—Å–∏–π</div>
                <div class="stat-value" id="activeSessions">0</div>
                <div class="stat-description">
                    –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫ –ø—Ä–æ–∫—Å–∏ (–≤–∫–ª—é—á–∞—è –æ–∂–∏–¥–∞—é—â–∏—Ö –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö).
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-label">–í—Å–µ–≥–æ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–π</div>
                <div class="stat-value" id="totalConnections">0</div>
                <div class="stat-description">
                    –°–∫–æ–ª—å–∫–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.
                </div>
            </div>

            <div class="stat-card green">
                <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –í—Ä–µ–º—è –û–∂–∏–¥–∞–Ω–∏—è</div>
                <div class="stat-value"><span id="avgWaitTime">0</span><span class="stat-unit">–º—Å</span></div>
                <div class="stat-description">
                    –°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∫–ª–∏–µ–Ω—Ç –∂–¥—ë—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å–ª–æ—Ç–∞. –ò–¥–µ–∞–ª ‚Äî –º–µ–Ω–µ–µ 10–º—Å. –ë–æ–ª–µ–µ 100–º—Å ‚Äî –ø—Ä–æ–±–ª–µ–º–∞.
                </div>
            </div>

            <div class="stat-card orange">
                <div class="stat-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –í—Ä–µ–º—è –û–∂–∏–¥–∞–Ω–∏—è</div>
                <div class="stat-value"><span id="maxWaitTime">0</span><span class="stat-unit">–º—Å</span></div>
                <div class="stat-description">
                    –°–∞–º–æ–µ –¥–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è. –ï—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∫—É–Ω–¥ ‚Äî –∫–ª–∏–µ–Ω—Ç—ã –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç –∑–∞–¥–µ—Ä–∂–∫–∏.
                </div>
            </div>

            <div class="stat-card" style="border-left-color: #e94560;">
                <div class="stat-label">–¢–∞–π–º–∞—É—Ç–æ–≤ –û–∂–∏–¥–∞–Ω–∏—è</div>
                <div class="stat-value" id="timeoutCount">0</div>
                <div class="stat-description">
                    –ö–ª–∏–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–∂–¥–∞–ª–∏—Å—å —Å–ª–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É. –ï—Å–ª–∏ > 0, –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å MaxSize –∏–ª–∏
                    ConnectionTimeout.
                </div>
            </div>

            <div class="stat-card blue">
                <div class="stat-label">–¢–∞–π–º–∞—É—Ç –û–∂–∏–¥–∞–Ω–∏—è</div>
                <div class="stat-value"><span id="connectionTimeout">30</span><span class="stat-unit">—Å–µ–∫</span></div>
                <div class="stat-description">
                    –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –∂–¥–∞—Ç—å —Å–ª–æ—Ç–∞. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É "too many
                    connections".
                </div>
            </div>
        </div>

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ -->
        <div class="sessions-section">
            <h2>üîå –ê–∫—Ç–∏–≤–Ω—ã–µ –°–µ—Å—Å–∏–∏ <span id="sessionCount">0</span></h2>
            <table>
                <thead>
                    <tr>
                        <th>–ë–∞–∑–∞</th>
                        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                        <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                        <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                        <th>–û–∂–∏–¥–∞–Ω–∏–µ</th>
                        <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                    </tr>
                </thead>
                <tbody id="sessionsTable">
                    <tr>
                        <td colspan="6" style="text-align: center; color: #666;">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤ -->
        <div class="glossary">
            <h2>üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤</h2>
            <div class="glossary-grid">
                <div class="glossary-item">
                    <h4>Backend Connection (–ë—ç–∫–µ–Ω–¥-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)</h4>
                    <p>–†–µ–∞–ª—å–Ω–æ–µ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É PgBouncer –∏ PostgreSQL. –≠—Ç–æ —Ç–æ, —á—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É.
                    </p>
                </div>
                <div class="glossary-item">
                    <h4>Client Session (–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–µ—Å—Å–∏—è)</h4>
                    <p>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ PgBouncer. –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ, –ø–æ–∫–∞ –µ—Å—Ç—å —Å–ª–æ—Ç—ã –∏–ª–∏ –æ—á–µ—Ä–µ–¥—å –Ω–µ
                        –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞.</p>
                </div>
                <div class="glossary-item">
                    <h4>MaxSize (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞)</h4>
                    <p>–õ–∏–º–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ PostgreSQL. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ <code>appsettings.json</code> ‚Üí
                        Pool.MaxSize.</p>
                </div>
                <div class="glossary-item">
                    <h4>ConnectionTimeout (–¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)</h4>
                    <p>–°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –∂–¥–∞—Ç—å —Å–ª–æ—Ç–∞. Pool.ConnectionTimeout –≤ –∫–æ–Ω—Ñ–∏–≥–µ. –£–≤–µ–ª–∏—á—å—Ç–µ, –µ—Å–ª–∏ —á–∞—Å—Ç—ã–µ
                        —Ç–∞–π–º–∞—É—Ç—ã.</p>
                </div>
                <div class="glossary-item">
                    <h4>Session Pooling</h4>
                    <p>–†–µ–∂–∏–º, –≥–¥–µ –∫–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ—ë backend-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –≤—Å—ë –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏. 1:1 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ.
                    </p>
                </div>
                <div class="glossary-item">
                    <h4>FIFO (First In, First Out)</h4>
                    <p>–¢–∏–ø –æ—á–µ—Ä–µ–¥–∏: –∫—Ç–æ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å–∏–ª —Å–ª–æ—Ç ‚Äî —Ç–æ—Ç –ø–µ—Ä–≤—ã–π –µ–≥–æ –ø–æ–ª—É—á–∏—Ç. –ß–µ—Å—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å.</p>
                </div>
            </div>
        </div>

        <footer>
            PgBouncer.NET ‚Äî Connection pooler –¥–ª—è PostgreSQL –Ω–∞ .NET | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        </footer>
    </div>

    <script>
        const API_BASE = '/api';

        function formatDuration(ms) {
            const seconds = Math.floor(ms / 1000);
            const minutes = Math.floor(seconds / 60);
            if (minutes > 0) {
                return `${minutes}–º ${seconds % 60}—Å`;
            }
            return `${seconds}—Å`;
        }

        function getStateBadge(state) {
            const states = {
                'Active': ['active', '–ê–∫—Ç–∏–≤–Ω–∞'],
                'WaitingForSlot': ['waiting', '–û–∂–∏–¥–∞–Ω–∏–µ'],
                'Connecting': ['connecting', '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ'],
                'Error': ['error', '–û—à–∏–±–∫–∞'],
                'Completed': ['connecting', '–ó–∞–≤–µ—Ä—à–µ–Ω–∞']
            };
            const [cls, text] = states[state] || ['connecting', state];
            return `<span class="state-badge state-${cls}">${text}</span>`;
        }

        async function updateStats() {
            try {
                const response = await fetch(`${API_BASE}/sessions`);
                const data = await response.json();

                // –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
                document.getElementById('activeBackend').textContent = data.activeBackendConnections || 0;
                document.getElementById('maxBackend').textContent = data.maxBackendConnections || 100;
                document.getElementById('maxBackendLabel').textContent = data.maxBackendConnections || 100;
                document.getElementById('maxBackendInfo').textContent = data.maxBackendConnections || 100;
                document.getElementById('waitingClients').textContent = data.waitingClients || 0;
                document.getElementById('activeSessions').textContent = data.activeSessions || 0;
                document.getElementById('totalConnections').textContent = data.totalConnections || 0;
                document.getElementById('avgWaitTime').textContent = data.avgWaitTimeMs || 0;
                document.getElementById('maxWaitTime').textContent = data.maxWaitTimeMs || 0;
                document.getElementById('timeoutCount').textContent = data.timeoutCount || 0;
                document.getElementById('connectionTimeout').textContent = data.connectionTimeout || 30;

                // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
                const progress = (data.activeBackendConnections / data.maxBackendConnections) * 100;
                document.getElementById('backendProgress').style.width = `${Math.min(progress, 100)}%`;

                // –¢–∞–±–ª–∏—Ü–∞ —Å–µ—Å—Å–∏–π
                const sessions = data.sessions || [];
                document.getElementById('sessionCount').textContent = sessions.length;

                const tbody = document.getElementById('sessionsTable');
                if (sessions.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π</td></tr>';
                } else {
                    tbody.innerHTML = sessions.map(s => `
                        <tr>
                            <td>${s.database || '-'}</td>
                            <td>${s.username || '-'}</td>
                            <td>${s.remoteEndPoint || '-'}</td>
                            <td>${getStateBadge(s.state)}</td>
                            <td>${s.waitTimeMs || 0} –º—Å</td>
                            <td>${formatDuration(s.durationMs || 0)}</td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        updateStats();
        setInterval(updateStats, 2000);
    </script>
</body>

</html>